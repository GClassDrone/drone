<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gclass.drone.mapper.IBoardMapper">

	
<!-- 글등록시 받는값 -->

	<insert id="create">
		insert into board ( subjno, bno, mno, ttl, ctt)
		values(#{subjno}, board_next(#{subjno}), #{mno}, #{ttl}, #{ctt})
	</insert>

<!--프로필 상세 페이지볼 때 읽어오는 값들 -->

	<select id="read" resultType="IBoardDto">
		select bno, mno, ttl, ctt, readcnt, regdt
		from board
		where bno= #{bno}
	</select>


<!-- 글 수정할때 수정가능한 값들 -->

 	<update id="update">
		update board set
		         ttl = #{ttl}
			   , ctt = #{ctt}
			   , delyn = #{delyn}
		 where bno = #{bno}
	</update>

<!-- 삭제시에 삭제는 글번호로 -->
	<delete id="delete">
		delete from board where bno = #{bno}
	</delete>
	
	<!-- 리스트 뽑아오기 -->
	
	<select id="listAll" resultType="IBoardDto">
		select * 
		  from (
				select rownum as rnum, a.* 
				  from (
						select /*+ index_desc(board board_subjno_bno_pk) */ *
						  from board
					   ) a 
		<![CDATA[
				 where rownum <= #{endRowNum}
			   ) b
		 where rnum >= #{startRowNum}
		]]>
	</select>
</mapper>